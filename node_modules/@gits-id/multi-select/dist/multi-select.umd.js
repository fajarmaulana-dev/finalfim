(function(s,e){typeof exports=="object"&&typeof module<"u"?e(exports,require("vue"),require("@heroicons/vue/solid"),require("@gits-id/badge"),require("@gits-id/tooltip"),require("@vueuse/core"),require("vee-validate")):typeof define=="function"&&define.amd?define(["exports","vue","@heroicons/vue/solid","@gits-id/badge","@gits-id/tooltip","@vueuse/core","vee-validate"],e):(s=typeof globalThis<"u"?globalThis:s||self,e(s.VMultiSelect={},s.Vue,s.solid,s.VBadge,s.VTooltip,s.core,s.veeValidate))})(this,function(s,e,u,$,H,E,_){"use strict";const M=l=>l&&typeof l=="object"&&"default"in l?l:{default:l},x=M($),R=M(H),be="",U=(l,d)=>{const m=l.__vccOpts||l;for(const[i,f]of d)m[i]=f;return m},I=l=>(e.pushScopeId("data-v-121e466c"),l=l(),e.popScopeId(),l),W=["for"],X={class:"relative mt-1"},G={key:0,class:"flex items-center gap-2 flex-wrap"},J=["id","placeholder","name","onKeydown"],Q={class:"absolute inset-y-0 right-0 flex items-center pr-2"},Y=I(()=>e.createElementVNode("span",null,"Clear",-1)),Z={key:0,class:"absolute inset-y-0 left-0 flex items-center pl-3 text-primary-500"},v=I(()=>e.createElementVNode("div",{class:"border-b h-1"},null,-1)),ee=["onClick","onMouseover"],te={inheritAttrs:!1},le=e.defineComponent({...te,__name:"VMultiSelect",props:{modelValue:{type:Array,default:()=>[]},items:{type:Array,default:()=>[]},itemText:{type:String,default:"text"},itemValue:{type:String,default:"value"},searchBy:{type:String,default:"text"},maxBadge:{type:Number,default:0},placeholder:{type:String,default:"Search..."},delay:{type:Number,default:500},id:{type:String,default:""},name:{type:String,default:""},inputProps:{type:Object,default:()=>({})},selectAll:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},error:{type:Boolean,default:!1},errorMessages:{type:Array,default:()=>[]},wrapperClass:{type:String,default:""},inputClass:{type:String,default:""},badgeColor:{type:String,default:"primary"},badgeClass:{type:String,default:""},badgeProps:{type:Object,default:()=>({})},dropdownClass:{type:String,default:""},itemClass:{type:String,default:""},checkWrapperClass:{type:String,default:"text-primary-500"},checkIconClass:{type:String,default:""},noDataClass:{type:String,default:""},loadingClass:{type:String,default:""},label:{type:String,default:""},labelClass:{type:String,default:"mb-2 block"},rules:{type:String,default:""},errorClass:{type:String,default:"text-error-600 mt-1 text-sm"}},emits:["click:outside","update:modelValue","search","selected"],setup(l,{emit:d}){const m=l,{maxBadge:i,items:f,modelValue:T,placeholder:ae,id:z,delay:re,name:y,inputProps:ne,itemText:b,itemValue:V,searchBy:oe,selectAll:se,loading:ce,rules:ie}=e.toRefs(m),A=e.ref(null),c=e.ref(!1),g=e.ref(""),o=e.ref(-1),w=e.ref([]),B=e.ref(null),{value:n,errorMessage:S}=_.useField(y,ie,{initialValue:T.value}),de=(t,a)=>String(t?.[a])?.toLowerCase()?.includes(g.value.toLowerCase()),fe=t=>g.value?[oe.value,b.value,V.value].filter(Boolean).some(p=>de(t,p)):!0,N=e.computed(()=>f.value.filter(fe)),pe=e.computed(()=>i.value>0?n.value.slice(0,i.value):n.value),ue=(t,a)=>{t&&(w.value[a]=t)};e.onBeforeUpdate(()=>{w.value=[]});const F=t=>{const a=h(t);a>-1?n.value.splice(a,1):n.value.push(t),d("selected",n)},h=t=>n.value.findIndex(a=>a[V.value]===t?.[V.value]),me=t=>h(t)>-1,K=(t,a)=>t.selected||me(t),P=()=>{n.value=[],o.value=-1},ye=t=>{const a=h(t);a>-1&&n.value.splice(a,1)},q=E.useDebounceFn(t=>{c.value=!0,g.value=t.target.value,o.value=0,d("search",g)},re.value),k=e.computed(()=>n.value.length===f.value.length),ge=()=>{k.value?P():f.value.forEach(t=>{h(t)<0&&n.value.push(t)})},he=()=>{c.value=!0};E.onClickOutside(A,()=>{d("click:outside"),c.value=!1});const ke=()=>{const t=N.value[o.value];t&&F(t)},L=()=>{c.value||(c.value=!0),o.value===null?o.value=0:o.value<f.value.length-1&&o.value++,j()},O=()=>{c.value||(c.value=!0),o.value===null?o.value=0:o.value===0?o.value=-1:o.value--,j()},Ce=t=>{t.shiftKey?O():L()},xe=()=>{c.value=!1},j=()=>{e.nextTick(()=>{const t=o.value,r=w.value[t]?.offsetTop-(B.value.offsetHeight-100);B.value?.scrollTo({top:r,behavior:"smooth"})})};return e.watch(T,t=>{n.value=t},{immediate:!0,deep:!0}),e.watch(n,t=>{d("update:modelValue",t)},{deep:!0}),(t,a)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createElementVNode("div",{ref_key:"target",ref:A,class:""},[e.createElementVNode("div",null,[e.createElementVNode("label",{for:e.unref(z)||e.unref(y),class:e.normalizeClass(l.labelClass)},e.toDisplayString(l.label),11,W),e.createElementVNode("div",X,[e.createElementVNode("div",{class:e.normalizeClass(["relative w-full py-2 pl-3 pr-10 text-left bg-white rounded-md border cursor-default focus:outline-none sm:text-sm gap-y-1 flex flex-wrap items-center focus-visible:ring-2 focus-visible:ring-opacity-75 focus-visible:ring-offset-2",[l.error||e.unref(S)?"v-multi-select-error border-error-500":"v-multi-select-normal border-gray-300 hover:border-gray-400",l.wrapperClass]]),onClick:a[1]||(a[1]=r=>r.preventDefault())},[e.unref(n).length?(e.openBlock(),e.createElementBlock("div",G,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(pe),r=>(e.openBlock(),e.createBlock(e.unref(x.default),e.mergeProps({key:r.value,color:l.badgeColor,dismissable:"",small:"",class:["h-6 truncate",l.badgeClass],onDismiss:p=>ye(r)},l.badgeProps),{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(r[e.unref(b)]),1)]),_:2},1040,["color","class","onDismiss"]))),128)),e.unref(i)>0&&e.unref(n).length>e.unref(i)?(e.openBlock(),e.createBlock(e.unref(x.default),{key:0,small:""},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(e.unref(n).length-e.unref(i))+" more ",1)]),_:1})):e.createCommentVNode("",!0)])):e.createCommentVNode("",!0),e.createElementVNode("input",e.mergeProps({id:e.unref(z),type:"search",class:["border-none px-1 py-1 focus:outline-none focus:!ring-0 focus:!border-none text-sm flex-grow",l.inputClass],autofill:"false",autocomplete:"off",placeholder:e.unref(n).length<1?e.unref(ae):"",name:e.unref(y)},e.unref(ne),{onInput:a[0]||(a[0]=(...r)=>e.unref(q)&&e.unref(q)(...r)),onFocus:he,onKeydown:[e.withKeys(e.withModifiers(ke,["prevent"]),["enter"]),e.withKeys(e.withModifiers(L,["prevent"]),["down"]),e.withKeys(e.withModifiers(O,["prevent"]),["up"]),e.withKeys(e.withModifiers(Ce,["prevent"]),["tab"]),e.withKeys(e.withModifiers(xe,["prevent"]),["esc"])]}),null,16,J),e.createElementVNode("span",Q,[e.unref(n).length>1?(e.openBlock(),e.createBlock(e.unref(R.default),{key:0},{activator:e.withCtx(({on:r})=>[e.createVNode(e.unref(x.default),e.mergeProps({circle:"",class:"!p-1 !bg-transparent",onClick:P},e.toHandlers(r)),{default:e.withCtx(()=>[e.createVNode(e.unref(u.XIcon),{class:"text-gray-400"})]),_:2},1040)]),default:e.withCtx(()=>[Y]),_:1})):e.createCommentVNode("",!0),e.createVNode(e.unref(u.ChevronDownIcon),{class:"w-5 h-5 text-gray-400","aria-hidden":"true"})])],2),e.createVNode(e.Transition,{"leave-active-class":"transition duration-100 ease-in","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:e.withCtx(()=>[c.value?(e.openBlock(),e.createElementBlock("div",{key:0,ref_key:"dropdown",ref:B,class:e.normalizeClass(["absolute w-full py-1 mt-1 overflow-auto text-base bg-white rounded-md shadow-lg max-h-60 ring-1 ring-black ring-opacity-5 focus:outline-none sm:text-sm px-0 z-10",l.dropdownClass])},[e.unref(ce)?(e.openBlock(),e.createElementBlock("div",{key:0,class:e.normalizeClass(["pl-6 pr-4 py-2 text-gray-600",l.loadingClass])}," Loading... ",2)):e.unref(N).length?(e.openBlock(),e.createElementBlock(e.Fragment,{key:1},[e.unref(se)?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[e.createElementVNode("div",{class:"bg-white hover:text-primary-500 hover:bg-primary-100 text-gray-900 cursor-default select-none py-2 pl-10 pr-4 relative",onClick:ge},[e.createElementVNode("span",{class:e.normalizeClass([e.unref(k)?"font-medium":"font-normal","block truncate"])},e.toDisplayString(e.unref(k)?"Deselect All":"Select All"),3),e.unref(k)?(e.openBlock(),e.createElementBlock("span",Z,[e.createVNode(e.unref(u.CheckIcon),{class:"w-5 h-5","aria-hidden":"true"})])):e.createCommentVNode("",!0)]),v],64)):e.createCommentVNode("",!0),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(N),(r,p)=>(e.openBlock(),e.createElementBlock("div",{key:r.value,ref_for:!0,ref:C=>ue(C,p),onClick:C=>F(r),onMouseover:C=>o.value=p,onMouseout:a[2]||(a[2]=C=>o.value=-1)},[e.createElementVNode("div",{class:e.normalizeClass(["bg-white hover:text-primary-500 hover:bg-primary-100",[o.value===p?"text-primary-500 bg-primary-100":"text-gray-900","cursor-default select-none relative py-2 pl-10 pr-4",l.itemClass]])},[e.createElementVNode("span",{class:e.normalizeClass([K(r)?"font-medium":"font-normal","block truncate"])},e.toDisplayString(r[e.unref(b)]),3),K(r)?(e.openBlock(),e.createElementBlock("span",{key:0,class:e.normalizeClass(["absolute inset-y-0 left-0 flex items-center pl-3 text-primary-500",l.checkWrapperClass])},[e.createVNode(e.unref(u.CheckIcon),{class:e.normalizeClass(["w-5 h-5",l.checkIconClass]),"aria-hidden":"true"},null,8,["class"])],2)):e.createCommentVNode("",!0)],2)],40,ee))),128))],64)):(e.openBlock(),e.createElementBlock("div",{key:2,class:e.normalizeClass(["pl-6 pr-4 py-2 text-gray-600",l.noDataClass])}," No Data ",2))],2)):e.createCommentVNode("",!0)]),_:1})])])],512),l.errorMessages.length?(e.openBlock(),e.createBlock(e.unref(_.ErrorMessage),{key:0,class:"text-error-600 text-sm",name:e.unref(y)},null,8,["name"])):e.unref(S)?(e.openBlock(),e.createElementBlock("div",{key:1,class:e.normalizeClass(l.errorClass)},e.toDisplayString(e.unref(S)),3)):e.createCommentVNode("",!0)],64))}}),D=U(le,[["__scopeId","data-v-121e466c"]]);s.VMultiSelect=D,s.default=D,Object.defineProperties(s,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
