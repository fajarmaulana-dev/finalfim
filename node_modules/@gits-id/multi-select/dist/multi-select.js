"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const e=require("vue"),h=require("@heroicons/vue/solid"),oe=require("@gits-id/badge"),ne=require("@gits-id/tooltip"),F=require("@vueuse/core"),K=require("vee-validate"),P=l=>l&&typeof l=="object"&&"default"in l?l:{default:l},B=P(oe),se=P(ne);const ce=(l,u)=>{const f=l.__vccOpts||l;for(const[c,i]of u)f[c]=i;return f},q=l=>(e.pushScopeId("data-v-121e466c"),l=l(),e.popScopeId(),l),ue=["for"],ie={class:"relative mt-1"},de={key:0,class:"flex items-center gap-2 flex-wrap"},fe=["id","placeholder","name","onKeydown"],pe={class:"absolute inset-y-0 right-0 flex items-center pr-2"},me=q(()=>e.createElementVNode("span",null,"Clear",-1)),ve={key:0,class:"absolute inset-y-0 left-0 flex items-center pl-3 text-primary-500"},ge=q(()=>e.createElementVNode("div",{class:"border-b h-1"},null,-1)),ye=["onClick","onMouseover"],he={inheritAttrs:!1},ke=e.defineComponent({...he,__name:"VMultiSelect",props:{modelValue:{type:Array,default:()=>[]},items:{type:Array,default:()=>[]},itemText:{type:String,default:"text"},itemValue:{type:String,default:"value"},searchBy:{type:String,default:"text"},maxBadge:{type:Number,default:0},placeholder:{type:String,default:"Search..."},delay:{type:Number,default:500},id:{type:String,default:""},name:{type:String,default:""},inputProps:{type:Object,default:()=>({})},selectAll:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},error:{type:Boolean,default:!1},errorMessages:{type:Array,default:()=>[]},wrapperClass:{type:String,default:""},inputClass:{type:String,default:""},badgeColor:{type:String,default:"primary"},badgeClass:{type:String,default:""},badgeProps:{type:Object,default:()=>({})},dropdownClass:{type:String,default:""},itemClass:{type:String,default:""},checkWrapperClass:{type:String,default:"text-primary-500"},checkIconClass:{type:String,default:""},noDataClass:{type:String,default:""},loadingClass:{type:String,default:""},label:{type:String,default:""},labelClass:{type:String,default:"mb-2 block"},rules:{type:String,default:""},errorClass:{type:String,default:"text-error-600 mt-1 text-sm"}},emits:["click:outside","update:modelValue","search","selected"],setup(l,{emit:u}){const f=l,{maxBadge:c,items:i,modelValue:S,placeholder:O,id:N,delay:j,name:p,inputProps:$,itemText:k,itemValue:C,searchBy:H,selectAll:R,loading:U,rules:W}=e.toRefs(f),E=e.ref(null),s=e.ref(!1),m=e.ref(""),n=e.ref(-1),b=e.ref([]),x=e.ref(null),{value:o,errorMessage:V}=K.useField(p,W,{initialValue:S.value}),X=(t,a)=>String(t?.[a])?.toLowerCase()?.includes(m.value.toLowerCase()),G=t=>m.value?[H.value,k.value,C.value].filter(Boolean).some(d=>X(t,d)):!0,w=e.computed(()=>i.value.filter(G)),J=e.computed(()=>c.value>0?o.value.slice(0,c.value):o.value),Q=(t,a)=>{t&&(b.value[a]=t)};e.onBeforeUpdate(()=>{b.value=[]});const _=t=>{const a=v(t);a>-1?o.value.splice(a,1):o.value.push(t),u("selected",o)},v=t=>o.value.findIndex(a=>a[C.value]===t?.[C.value]),Y=t=>v(t)>-1,I=(t,a)=>t.selected||Y(t),M=()=>{o.value=[],n.value=-1},Z=t=>{const a=v(t);a>-1&&o.value.splice(a,1)},D=F.useDebounceFn(t=>{s.value=!0,m.value=t.target.value,n.value=0,u("search",m)},j.value),g=e.computed(()=>o.value.length===i.value.length),ee=()=>{g.value?M():i.value.forEach(t=>{v(t)<0&&o.value.push(t)})},te=()=>{s.value=!0};F.onClickOutside(E,()=>{u("click:outside"),s.value=!1});const le=()=>{const t=w.value[n.value];t&&_(t)},z=()=>{s.value||(s.value=!0),n.value===null?n.value=0:n.value<i.value.length-1&&n.value++,A()},T=()=>{s.value||(s.value=!0),n.value===null?n.value=0:n.value===0?n.value=-1:n.value--,A()},ae=t=>{t.shiftKey?T():z()},re=()=>{s.value=!1},A=()=>{e.nextTick(()=>{const t=n.value,r=b.value[t]?.offsetTop-(x.value.offsetHeight-100);x.value?.scrollTo({top:r,behavior:"smooth"})})};return e.watch(S,t=>{o.value=t},{immediate:!0,deep:!0}),e.watch(o,t=>{u("update:modelValue",t)},{deep:!0}),(t,a)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createElementVNode("div",{ref_key:"target",ref:E,class:""},[e.createElementVNode("div",null,[e.createElementVNode("label",{for:e.unref(N)||e.unref(p),class:e.normalizeClass(l.labelClass)},e.toDisplayString(l.label),11,ue),e.createElementVNode("div",ie,[e.createElementVNode("div",{class:e.normalizeClass(["relative w-full py-2 pl-3 pr-10 text-left bg-white rounded-md border cursor-default focus:outline-none sm:text-sm gap-y-1 flex flex-wrap items-center focus-visible:ring-2 focus-visible:ring-opacity-75 focus-visible:ring-offset-2",[l.error||e.unref(V)?"v-multi-select-error border-error-500":"v-multi-select-normal border-gray-300 hover:border-gray-400",l.wrapperClass]]),onClick:a[1]||(a[1]=r=>r.preventDefault())},[e.unref(o).length?(e.openBlock(),e.createElementBlock("div",de,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(J),r=>(e.openBlock(),e.createBlock(e.unref(B.default),e.mergeProps({key:r.value,color:l.badgeColor,dismissable:"",small:"",class:["h-6 truncate",l.badgeClass],onDismiss:d=>Z(r)},l.badgeProps),{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(r[e.unref(k)]),1)]),_:2},1040,["color","class","onDismiss"]))),128)),e.unref(c)>0&&e.unref(o).length>e.unref(c)?(e.openBlock(),e.createBlock(e.unref(B.default),{key:0,small:""},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(e.unref(o).length-e.unref(c))+" more ",1)]),_:1})):e.createCommentVNode("",!0)])):e.createCommentVNode("",!0),e.createElementVNode("input",e.mergeProps({id:e.unref(N),type:"search",class:["border-none px-1 py-1 focus:outline-none focus:!ring-0 focus:!border-none text-sm flex-grow",l.inputClass],autofill:"false",autocomplete:"off",placeholder:e.unref(o).length<1?e.unref(O):"",name:e.unref(p)},e.unref($),{onInput:a[0]||(a[0]=(...r)=>e.unref(D)&&e.unref(D)(...r)),onFocus:te,onKeydown:[e.withKeys(e.withModifiers(le,["prevent"]),["enter"]),e.withKeys(e.withModifiers(z,["prevent"]),["down"]),e.withKeys(e.withModifiers(T,["prevent"]),["up"]),e.withKeys(e.withModifiers(ae,["prevent"]),["tab"]),e.withKeys(e.withModifiers(re,["prevent"]),["esc"])]}),null,16,fe),e.createElementVNode("span",pe,[e.unref(o).length>1?(e.openBlock(),e.createBlock(e.unref(se.default),{key:0},{activator:e.withCtx(({on:r})=>[e.createVNode(e.unref(B.default),e.mergeProps({circle:"",class:"!p-1 !bg-transparent",onClick:M},e.toHandlers(r)),{default:e.withCtx(()=>[e.createVNode(e.unref(h.XIcon),{class:"text-gray-400"})]),_:2},1040)]),default:e.withCtx(()=>[me]),_:1})):e.createCommentVNode("",!0),e.createVNode(e.unref(h.ChevronDownIcon),{class:"w-5 h-5 text-gray-400","aria-hidden":"true"})])],2),e.createVNode(e.Transition,{"leave-active-class":"transition duration-100 ease-in","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:e.withCtx(()=>[s.value?(e.openBlock(),e.createElementBlock("div",{key:0,ref_key:"dropdown",ref:x,class:e.normalizeClass(["absolute w-full py-1 mt-1 overflow-auto text-base bg-white rounded-md shadow-lg max-h-60 ring-1 ring-black ring-opacity-5 focus:outline-none sm:text-sm px-0 z-10",l.dropdownClass])},[e.unref(U)?(e.openBlock(),e.createElementBlock("div",{key:0,class:e.normalizeClass(["pl-6 pr-4 py-2 text-gray-600",l.loadingClass])}," Loading... ",2)):e.unref(w).length?(e.openBlock(),e.createElementBlock(e.Fragment,{key:1},[e.unref(R)?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[e.createElementVNode("div",{class:"bg-white hover:text-primary-500 hover:bg-primary-100 text-gray-900 cursor-default select-none py-2 pl-10 pr-4 relative",onClick:ee},[e.createElementVNode("span",{class:e.normalizeClass([e.unref(g)?"font-medium":"font-normal","block truncate"])},e.toDisplayString(e.unref(g)?"Deselect All":"Select All"),3),e.unref(g)?(e.openBlock(),e.createElementBlock("span",ve,[e.createVNode(e.unref(h.CheckIcon),{class:"w-5 h-5","aria-hidden":"true"})])):e.createCommentVNode("",!0)]),ge],64)):e.createCommentVNode("",!0),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(w),(r,d)=>(e.openBlock(),e.createElementBlock("div",{key:r.value,ref_for:!0,ref:y=>Q(y,d),onClick:y=>_(r),onMouseover:y=>n.value=d,onMouseout:a[2]||(a[2]=y=>n.value=-1)},[e.createElementVNode("div",{class:e.normalizeClass(["bg-white hover:text-primary-500 hover:bg-primary-100",[n.value===d?"text-primary-500 bg-primary-100":"text-gray-900","cursor-default select-none relative py-2 pl-10 pr-4",l.itemClass]])},[e.createElementVNode("span",{class:e.normalizeClass([I(r)?"font-medium":"font-normal","block truncate"])},e.toDisplayString(r[e.unref(k)]),3),I(r)?(e.openBlock(),e.createElementBlock("span",{key:0,class:e.normalizeClass(["absolute inset-y-0 left-0 flex items-center pl-3 text-primary-500",l.checkWrapperClass])},[e.createVNode(e.unref(h.CheckIcon),{class:e.normalizeClass(["w-5 h-5",l.checkIconClass]),"aria-hidden":"true"},null,8,["class"])],2)):e.createCommentVNode("",!0)],2)],40,ye))),128))],64)):(e.openBlock(),e.createElementBlock("div",{key:2,class:e.normalizeClass(["pl-6 pr-4 py-2 text-gray-600",l.noDataClass])}," No Data ",2))],2)):e.createCommentVNode("",!0)]),_:1})])])],512),l.errorMessages.length?(e.openBlock(),e.createBlock(e.unref(K.ErrorMessage),{key:0,class:"text-error-600 text-sm",name:e.unref(p)},null,8,["name"])):e.unref(V)?(e.openBlock(),e.createElementBlock("div",{key:1,class:e.normalizeClass(l.errorClass)},e.toDisplayString(e.unref(V)),3)):e.createCommentVNode("",!0)],64))}}),L=ce(ke,[["__scopeId","data-v-121e466c"]]);exports.VMultiSelect=L;exports.default=L;
