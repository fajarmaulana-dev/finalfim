"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const e=require("vue"),Y=require("@gits-id/pagination"),Z=require("@gits-id/select"),A=require("@heroicons/vue/solid"),_=require("@gits-id/spinner"),j=require("@gits-id/forms"),ee=require("@gits-id/utils"),$=a=>a&&typeof a=="object"&&"default"in a?a:{default:a},te=$(Y),ae=$(Z),le=$(_),oe={class:"w-auto hidden sm:flex gap-1 items-center text-sm text-gray-700 order-2"},re={class:"hidden sm:inline"},se={class:"font-semibold"},ne=e.createElementVNode("span",null,"-",-1),ue={class:"font-semibold"},ie={class:"font-semibold"},de={class:"hidden sm:inline"},ce=e.createElementVNode("div",{class:"flex-grow order-1 sm:order-3"},"\xA0",-1),me={class:"w-auto flex justify-center sm:justify-end order-3 sm:order-4"},F=e.defineComponent({__name:"VDataTablePagination",props:{modelValue:{type:Number,default:1},totalItems:{type:Number,default:0},itemsPerPage:{type:Number,default:10},itemsPerPageOptions:{type:Array,default:()=>[10,25,50,100]},showingText:{type:String,default:"Showing"},backgroundColor:{type:String,default:""},dataText:{type:String,default:"data"},fromText:{type:String,default:"from"},pagination:{type:Object,default:()=>({})}},emits:["update:modelValue","update:itemsPerPage","update:perPage","update:itemsPerPageOptions"],setup(a,{emit:s}){const b=a,{modelValue:w,totalItems:i,itemsPerPage:g,itemsPerPageOptions:x}=e.toRefs(b),c=e.ref(w.value),C=e.computed(()=>i.value>0?(c.value-1)*g.value+1:1),p=e.computed(()=>i.value>0?C.value+g.value-1:null),y=r=>{s("update:modelValue",r)};e.watch(c,r=>{y(r)},{immediate:!0});const N=e.computed(()=>x.value.map(r=>({text:r.toString(),value:r}))),m=e.ref(g.value);return e.watch(m,r=>{s("update:itemsPerPage",r),s("update:perPage",r)}),e.watch(g,r=>{m.value=r},{immediate:!0}),e.watch(w,r=>{c.value=r},{immediate:!0}),(r,v)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass([a.backgroundColor,"w-full px-6 py-3 border-t flex flex-row items-center gap-4 justify-center sm:justify-between"])},[e.renderSlot(r.$slots,"rowsPerPage",e.normalizeProps(e.guardReactiveProps({value:m.value,items:e.unref(N)})),()=>[e.createVNode(e.unref(ae.default),{modelValue:m.value,"onUpdate:modelValue":v[0]||(v[0]=d=>m.value=d),items:e.unref(N),"hide-check-icon":"",placeholder:"Select",class:"w-30 order-1",top:""},null,8,["modelValue","items"])]),e.createElementVNode("p",oe,[e.renderSlot(r.$slots,"meta",e.normalizeProps(e.guardReactiveProps({showingText:a.showingText,start:e.unref(C),end:e.unref(p),fromText:a.fromText,totalItems:e.unref(i),dataText:a.dataText})),()=>[e.createElementVNode("span",re,e.toDisplayString(a.showingText),1),e.createElementVNode("span",se,e.toDisplayString(e.unref(C)),1),ne,e.createElementVNode("span",ue,e.toDisplayString(e.unref(p)),1),e.createElementVNode("span",null,e.toDisplayString(a.fromText),1),e.createElementVNode("span",ie,e.toDisplayString(e.unref(i)),1),e.createElementVNode("span",de,e.toDisplayString(a.dataText),1)])]),ce,e.createElementVNode("div",me,[e.createVNode(e.unref(te.default),e.mergeProps({modelValue:c.value,"onUpdate:modelValue":v[1]||(v[1]=d=>c.value=d),"total-items":e.unref(i),"items-per-page":e.unref(g)},a.pagination),e.createSlots({_:2},[e.renderList(r.$slots,(d,k)=>({name:k,fn:e.withCtx(()=>[e.renderSlot(r.$slots,k)])}))]),1040,["modelValue","total-items","items-per-page"])])],2))}}),fe={class:"overflow-x-auto rounded-t-md"},ge={class:"w-full divide-y divide-gray-200"},pe=["width"],ye=["onClick"],ve={key:1,class:"text-sm font-semibold uppercase tracking-wider"},Se=["colspan"],Ve=["colspan"],L=e.defineComponent({__name:"VDataTable",props:{modelValue:{type:Array,default:()=>[]},value:{type:Array,default:()=>[]},headers:{type:Array,default:()=>[]},items:{type:Array,default:()=>[]},itemsPerPage:{type:Number,default:10},disableSorting:{type:Boolean,default:!1},pagination:{type:Object,default(){return{}}},loading:{type:Boolean,default:!1},search:{type:String,default:""},searchBy:{type:[String,Array],default:""},loadingText:{type:String,default:"Loading..."},noDataText:{type:String,default:"Data tidak ditemukan"},footerColor:{type:String,default:""},serverSide:{type:Boolean,default:!1},sortBy:{type:String,default:""},sortDirection:{type:String,default:""},hover:{type:Boolean,default:!1},striped:{type:Boolean,default:!1},dense:{type:Boolean,default:!1},hideFooter:{type:Boolean,default:!1},totalItems:{type:Number,default:0},page:{type:Number,default:1},mustSort:{type:Boolean,default:!1},noShadow:{type:Boolean,default:!1},selectable:{type:Boolean,default:!1},headerClass:{type:String,default:"bg-gray-50"},bodyClass:{type:String,default:"bg-white"},footerClass:{type:String,default:""},columnActiveClass:{type:String,default:"text-primary-500 hover:text-primary-600"},columnInactiveClass:{type:String,default:"text-gray-600 hover:text-primary-500"},hoverClass:{type:String,default:"transition duration-300 hover:bg-gray-100"},stripedClass:{type:String,default:"even:bg-gray-100"},tdClass:{type:String,default:""},trClass:{type:String,default:""},wrapperClass:{type:String,default:""},flat:{type:Boolean,default:!1},roundedClass:{type:String,default:"sm:rounded-lg"},bordered:{type:Boolean,default:!1},tile:{type:Boolean,default:!1}},emits:["update:search","update:sortBy","update:sortDirection","update:page","update:itemsPerPage","update:totalItems","update:pagination","page:change","itemsPerPage:change","pagination:change","update:modelValue","update:value","sort"],setup(a,{emit:s}){const b=a,{disableSorting:w,itemsPerPage:i,pagination:g,loading:x,search:c,searchBy:C,serverSide:p,items:y,hover:N,striped:m,dense:r,footerColor:v,headers:d,totalItems:k,page:D,mustSort:O,selectable:T,modelValue:q,sortBy:U,sortDirection:R}=e.toRefs(b),f=e.ref(D.value),S=e.ref(i.value),M=e.computed(()=>(f.value-1)*Number(S.value)),V=e.ref(U.value),h=e.ref(R.value),J=e.computed(()=>d.value.map(t=>t.value)),z=e.computed(()=>{let t=JSON.parse(JSON.stringify(y.value));return p.value?t:(V.value&&V.value&&!p.value&&(t.sort((l,o)=>{const u=+l[V.value],n=+o[V.value];return!isNaN(u)&&!isNaN(n)?Number(u)-Number(n):String(u).localeCompare(String(n))}),h.value==="desc"&&t.reverse()),c.value&&!p.value&&(t=t.filter(l=>[...J.value,C.value].flat().some(o=>String(l[o]).toLowerCase().includes(c.value.toLocaleLowerCase())))),t.slice(M.value).slice(0,S.value))}),H=e.computed(()=>b.headers.map(t=>({...t,sortable:t.hasOwnProperty("sortable")?t.sortable:!0,sorting:"asc"}))),G=t=>{const l=t.sorting&&V.value===t.value,o=t.positionFreeze==="right"?"right-0":"left-0";return[l?b.columnActiveClass:b.columnInactiveClass,{[`text-${t.align}`]:!!t.align},t.freeze?`sticky ${o} bg-gray-50 drop-shadow-lg`:""]},K=t=>{const l=t.positionFreeze==="right"?"right-0":"left-0";return[{[`text-${t.align}`]:!!t.align},t.freeze?`sticky ${l} bg-white drop-shadow-lg`:""]},Q=t=>{if(!t)return;let l="";O.value?h.value==="asc"?l="desc":l="asc":h.value===""?l="asc":h.value==="asc"?l="desc":h.value==="desc"&&(l=""),t.sorting=l,V.value=t.value,h.value=l};e.watch([V,h],([t,l])=>{s("update:sortBy",t),s("update:sortDirection",l),s("sort",{sortBy:t,direction:l})});const B=e.computed(()=>r.value?"px-4 py-2":"px-6 py-3"),I=(t={})=>{s("pagination:change",{page:f.value,itemsPerPage:S.value,...t})};e.watch(f,t=>{s("page:change",t),s("update:page",t),I({page:t})}),e.watch(S,t=>{s("itemsPerPage:change",t),s("update:itemsPerPage",t),I({itemsPerPage:t}),f.value=1}),e.watch(D,t=>{f.value=t}),e.watch(i,t=>{S.value=t});const P=e.ref([]),E=e.computed({get(){return y.value.length?P.value.length==y.value.length:!1},set(t){const l=[];t&&y.value.forEach(function(o){l.push(o)}),P.value=l}});e.watch(P,t=>{s("update:modelValue",t)},{deep:!0,immediate:!0}),e.watch(q,t=>{P.value=t},{deep:!0,immediate:!0});const W=e.computed(()=>k.value>0?(f.value-1)*i.value+1:1);return(t,l)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["w-full flex flex-col overflow-hidden",[{shadow:!a.noShadow&&!a.flat,[a.roundedClass]:!a.tile,border:a.bordered,"border-gray-200":a.bordered},a.wrapperClass]])},[e.createElementVNode("div",fe,[e.createElementVNode("table",ge,[e.createElementVNode("thead",{class:e.normalizeClass(a.headerClass)},[e.createElementVNode("tr",{class:e.normalizeClass({"divide divide-x":a.bordered})},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(H),o=>(e.openBlock(),e.createElementBlock("th",{key:o.value,scope:"col",class:e.normalizeClass(["text-left py-3 group",[G(o),e.unref(B),o.class]]),width:o.width},[e.unref(T)&&o.value==="selected"?e.renderSlot(t.$slots,"header.selectable",{key:0},()=>[e.createVNode(e.unref(j.VCheckbox),{modelValue:e.unref(E),"onUpdate:modelValue":l[0]||(l[0]=u=>e.isRef(E)?E.value=u:null)},null,8,["modelValue"])]):e.renderSlot(t.$slots,`header.${o.value}`,{key:1},()=>[!e.unref(w)&&o.sortable?(e.openBlock(),e.createElementBlock("button",{key:0,role:"button","aria-label":"Sort",type:"button",class:e.normalizeClass(["flex items-center truncate appearance-none text-sm font-semibold uppercase tracking-wider",[o.align?`justify-${o.align}`:"justify-between"]]),onClick:e.withModifiers(u=>Q(o),["prevent"])},[e.createElementVNode("span",null,e.toDisplayString(o.text),1),o.sorting==="desc"?(e.openBlock(),e.createBlock(e.unref(A.ChevronDownIcon),{key:0,class:"ml-2 h-5 w-5"})):e.createCommentVNode("",!0),o.sorting==="asc"?(e.openBlock(),e.createBlock(e.unref(A.ChevronUpIcon),{key:1,class:"ml-2 h-5 w-5"})):e.createCommentVNode("",!0)],10,ye)):(e.openBlock(),e.createElementBlock("span",ve,e.toDisplayString(o.text),1))])],10,pe))),128))],2)],2),e.createElementVNode("tbody",{class:e.normalizeClass([e.unref(m)?"":"divide-y divide-gray-200",a.bodyClass])},[e.unref(z).length<1&&!e.unref(x)?e.renderSlot(t.$slots,"empty",{key:0},()=>[e.createElementVNode("tr",null,[e.createElementVNode("td",{colspan:e.unref(d).length,class:e.normalizeClass(["text-center text-gray-600 text-sm whitespace-nowrap",[e.unref(B)]])},e.toDisplayString(a.noDataText),11,Se)])]):e.createCommentVNode("",!0),e.unref(x)?e.renderSlot(t.$slots,"loading",{key:1},()=>[e.createElementVNode("tr",null,[e.createElementVNode("td",{colspan:e.unref(d).length,class:e.normalizeClass(["text-center text-gray-600 text-sm whitespace-nowrap",[e.unref(B)]])},[e.createVNode(e.unref(le.default),{color:"primary",class:"mr-1"}),e.createTextVNode(" "+e.toDisplayString(a.loadingText),1)],10,Ve)])]):(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:2},e.renderList(e.unref(z),(o,u)=>(e.openBlock(),e.createElementBlock("tr",{key:`item-${u}`,class:e.normalizeClass({group:!0,[a.stripedClass]:e.unref(m),[a.hoverClass]:e.unref(N),"divide-x":a.bordered,[a.trClass]:Boolean(a.trClass)})},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(d),n=>(e.openBlock(),e.createElementBlock("td",{key:`header-${n.value}`,class:e.normalizeClass(["whitespace-nowrap text-sm text-gray-900",[K(n),e.unref(B),a.tdClass,n?.tdClass||""]])},[e.unref(T)&&n.value==="selected"?e.renderSlot(t.$slots,"item.selected",{key:0},()=>[e.createVNode(e.unref(j.VCheckbox),{modelValue:P.value,"onUpdate:modelValue":l[1]||(l[1]=X=>P.value=X),value:o},null,8,["modelValue","value"])]):n.value==="index"?e.renderSlot(t.$slots,"item.index",{key:1},()=>[e.createTextVNode(e.toDisplayString(e.unref(W)+u),1)]):e.renderSlot(t.$slots,`item.${n.value}`,{key:2,item:o,index:u},()=>[e.createTextVNode(e.toDisplayString(e.unref(ee.get)(o,n.value)),1)])],2))),128))],2))),128))],2)])]),a.hideFooter?e.createCommentVNode("",!0):e.renderSlot(t.$slots,"footer",{key:0},()=>[e.createVNode(F,e.mergeProps({modelValue:f.value,"onUpdate:modelValue":l[2]||(l[2]=o=>f.value=o),"background-color":e.unref(v)?e.unref(v):"",class:["rounded-b-md",a.footerClass],"total-items":e.unref(p)?e.unref(k):e.unref(y).length,itemsPerPage:S.value,"onUpdate:itemsPerPage":l[3]||(l[3]=o=>S.value=o)},e.unref(g)),null,16,["modelValue","background-color","class","total-items","itemsPerPage"])])],2))}});exports.VDataTable=L;exports.VDataTablePagination=F;exports.default=L;
